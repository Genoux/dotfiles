# TLP Battery Optimization Configuration
# TLP automatically detects AC/battery and applies appropriate settings
# These settings provide good balance between performance and battery life

# ------------------------------------------------------------------------------
# CPU Scaling Governor
# Performance on AC, powersave on battery

CPU_SCALING_GOVERNOR_ON_AC=schedutil
CPU_SCALING_GOVERNOR_ON_BAT=powersave

# CPU Energy/Performance Policy
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

# Turbo Boost
# Enable on both AC and battery for responsive performance
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=1

# AMD GPU Power Management (DPM)
# auto = dynamic power management
RADEON_DPM_PERF_LEVEL_ON_AC=auto
RADEON_DPM_PERF_LEVEL_ON_BAT=auto

RADEON_DPM_STATE_ON_AC=performance
RADEON_DPM_STATE_ON_BAT=battery

RADEON_POWER_PROFILE_ON_AC=default
RADEON_POWER_PROFILE_ON_BAT=default

# ------------------------------------------------------------------------------
# PCIe Active State Power Management (ASPM)
# Aggressive power saving for PCIe devices

PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=default

# ------------------------------------------------------------------------------
# Runtime Power Management for PCI(e) devices

RUNTIME_PM_ON_AC=auto
RUNTIME_PM_ON_BAT=auto

# Exclude specific devices if they cause issues (uncomment if needed)
# RUNTIME_PM_DRIVER_DENYLIST="nouveau nvidia radeon"

# ------------------------------------------------------------------------------
# USB Autosuspend

USB_AUTOSUSPEND=1
USB_EXCLUDE_AUDIO=1
USB_EXCLUDE_BTUSB=0
USB_EXCLUDE_PHONE=0
USB_EXCLUDE_PRINTER=1
USB_EXCLUDE_WWAN=0

# ------------------------------------------------------------------------------
# Audio Power Saving

SOUND_POWER_SAVE_ON_AC=0
SOUND_POWER_SAVE_ON_BAT=1

# ------------------------------------------------------------------------------
# WiFi Power Saving

WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=off

# ------------------------------------------------------------------------------
# Battery Charge Thresholds (if supported by hardware)
# Helps extend battery lifespan by not charging to 100% constantly

# Uncomment and adjust if your laptop supports battery charge thresholds
# START_CHARGE_THRESH_BAT0=75
# STOP_CHARGE_THRESH_BAT0=80

# ------------------------------------------------------------------------------
# Disk Devices

# Enable SATA link power management
SATA_LINKPWR_ON_AC=med_power_with_dipm
SATA_LINKPWR_ON_BAT=min_power

# Disk idle timeout
DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=2

# ------------------------------------------------------------------------------
# Display Backlight
# Auto-reduce backlight on battery

# Percentage of max brightness
# INTEL_GPU_MIN_FREQ_ON_AC=0
# INTEL_GPU_MIN_FREQ_ON_BAT=0
# INTEL_GPU_MAX_FREQ_ON_AC=0
# INTEL_GPU_MAX_FREQ_ON_BAT=0
# INTEL_GPU_BOOST_FREQ_ON_AC=0
# INTEL_GPU_BOOST_FREQ_ON_BAT=0

# ------------------------------------------------------------------------------
# Platform Profile (if available)
# Some laptops have platform_profile support
# performance on AC for maximum speed, balanced on battery for good responsiveness

PLATFORM_PROFILE_ON_AC=balanced
PLATFORM_PROFILE_ON_BAT=balanced

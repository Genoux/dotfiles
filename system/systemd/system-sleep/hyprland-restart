#!/bin/bash
# Restart Hyprland after hibernate resume to avoid compositor crash
# Only targets hibernate - regular suspend/resume works fine with S3

if [ "$1" = "post" ] && [ "$2" = "hibernate" ]; then
    HYPR_USER=$(ps aux | grep "Hyprland" | grep -v grep | awk '{print $1}' | head -1)

    if [ -n "$HYPR_USER" ]; then
        pkill -u "$HYPR_USER" Hyprland
    fi
fi

# ================================
# HYPRLAND WINDOW RULES CONFIG
# ================================
# See https://wiki.hyprland.org/Configuring/Window-Rules/
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/

# ================================
# XWAYLAND OPTIMIZATIONS
# ================================
# Fix dragging issues and optimize XWayland windows
# DISABLED: This rule was preventing apps from getting focus when launched
windowrule {
 name = windowrule-1
 no_focus = on
 match:class = ^$
 match:title = ^$
 match:xwayland = 1
 match:float = 1
 match:fullscreen = 0
 match:pin = 0
}

windowrule {
  name = windowrule-2
  no_blur = on
  opaque = on
  border_size = 0
  no_shadow = on
  match:xwayland = 1
  match:float = 1
}


# ================================
# BROWSERS
# ================================
windowrule {
  name = windowrule-3
  no_blur = on
  match:class = ^()$
  match:title = ^()$
}


# ================================
# COMMUNICATION APPS
# ================================
windowrule {
  name = windowrule-slack
  float = on
  size = 1200 800
  match:class = ^(slack)$
}


# ================================
# FILE MANAGERS
# ================================
windowrule {
  name = windowrule-6
  float = on
  center = on
  size = (monitor_w*0.65) (monitor_h*0.65)
  opacity = 0.90 0.90
  match:class = ^(org.gnome.Nautilus)$
}


# GTK File Picker Dialog
windowrule {
  name = windowrule-7
  float = on
  size = (monitor_w*0.6) (monitor_h*0.7)
  center = on
  opacity = 0.90 0.90
  match:class = ^(xdg-desktop-portal-gtk)$
}


# ================================
# SYSTEM UTILITIES
# ================================

# System Info (fastfetch)
windowrule {
  name = windowrule-8
  float = on
  center = on
  size = 1016 450
  match:class = ^(system-info)$
}


windowrule {
  name = windowrule-9
  float = on
  center = on
  size = 490 700
  match:class = ^(Caprine)$
}

# ================================
# PRODUCTIVITY APPS
# ================================
# Notion Calendar
windowrule {
  name = windowrule-10
  float = on
  size = 1024 480
  center = on
  match:class = ^(calcure)$
}


windowrule {
  name = windowrule-11
  float = on
  center = on
  size = (monitor_w*0.3) (monitor_h*0.3)
  pin = on
  match:class = ^(mpv)$
}

# Live cam - browser app mode (cam.jbroom.ca)
windowrule {
  name = windowrule-12
  float = on
  center = on
  size = 1280 720
  match:initial_title = .*cam\.jbroom\.ca.*
}

#windowrulev2 = pin, initialTitle:.*cam\.jbroom\.ca.*

# TUI Applications - desktop application support
windowrule {
  name = windowrule-13
  float = on
  center = on
  size = 700 700
  match:title = ^(bluetui)$
}


# Internet Manager (impala/iwd TUI) - matches any terminal with impala title
windowrule {
  name = windowrule-14
  float = on
  center = on
  size = 1024 700
  match:title = ^(impala)$
}


# kitty floating
windowrule {
  name = windowrule-15
  float = on
  center = on
  size = 1000 600
  match:title = ^(kitty)$
}


# btop floating
windowrule {
  name = windowrule-16
  float = on
  center = on
  size = 1024 600
  match:title = ^(btop)$
}


# battop
windowrule {
  name = windowrule-17
  float = on
  center = on
  size = 1024 700
  match:title = ^(battop)$
}


# wiremix floating
windowrule {
  name = windowrule-18
  float = on
  center = on
  size = 800 700
  match:title = ^(wiremix)$
}


windowrule {
  name = windowrule-19
  float = on
  center = on
  size = 1080 800
  match:title = ^(weather)$
}


# wthrr floating
windowrule {
  name = windowrule-20
  float = on
  center = on
  size = 630 650
  match:title = ^(wthrr)$
}


# clipse floating
windowrule {
  name = windowrule-21
  float = on
  center = on
  size = 700 700
  match:title = ^(clipse)$
}


# Dotfiles Manager
windowrule {
  name = windowrule-22
  float = on
  center = on
  size = 628 400
  match:class = ^(dotfiles-manager)$
}

# Picture-in-Picture windows (YouTube, Firefox, Chrome, etc)
# Firefox and some browsers use "Picture-in-Picture" title
windowrule {
  name = windowrule-23
  pin = on
  float = on
  size = (monitor_w*0.25) (monitor_h*0.25)
  move = ((monitor_w*1)-(monitor_w*0.255)) ((monitor_h*1)-(monitor_h*0.285))
  match:title = ^(Picture in picture)$
}

windowrule {
  name = windowrule-24
  size = (monitor_w*0.25) (monitor_h*0.25)
  move = ((monitor_w*1)-(monitor_w*0.255)) ((monitor_h*1)-(monitor_h*0.285))
  pin = on
  float = on
  match:title = ^(Picture-in-Picture)$
}

# satty - increased height for menu bar spacing
windowrule {
  name = windowrule-25
  size = 1280 800
  center = on
  float = on
  no_initial_focus = on
  match:title = ^(satty)$
}


# OSD (On-Screen Display) overlays - Multiple approaches
layerrule {
  name = layerrule-1
  blur = on
  ignore_alpha = 0.0
  blur_popups = on
  match:namespace = osd
}


# AGS GTK4 Layer Shell - enhanced blur
layerrule {
  name = layerrule-2
  blur = on
  blur_popups = on
  ignore_alpha = 0.1
  match:namespace = gtk4-layer-shell
}


windowrule {
  name = windowrule-26
  float = on
  center = on
  size = 1280 800
  match:class = ^(Claude)$
}


# Notification overlays
layerrule {
  name = layerrule-3
  blur = on
  ignore_alpha = 0.0
  match:namespace = notifications
}


layerrule {
  name = layerrule-4
  blur = on
  ignore_alpha = 0.1
  animation = fade
  match:namespace = ^(walker)$
}

# ================================
# GAMES
# ================================
windowrule {
  name = windowrule-28
  size = (monitor_w*0.79) (monitor_h*0.79)
  center = on
  float = on
  opacity = 1.0
  match:initial_title = www.legendsofidleon.com_/ytGl5oc/
}
